imagePullPolicy: IfNotPresent
replicas: 1
gitlabUrl: https://gitlab.com/
runnerRegistrationToken: "__CI_REGISTRATION_TOKEN__"
unregisterRunners: true
terminationGracePeriodSeconds: 300
concurrent: 200
checkInterval: 15
rbac:
  create: true
  rules:
    - resources: ["pods", "secrets"]
      verbs: ["get", "list", "watch", "create", "patch", "delete"]
    - apiGroups: [""]
      resources: ["pods/exec"]
      verbs: ["create", "patch", "delete"]
  clusterWideAccess: false
  podSecurityPolicy:
    enabled: false
    resourceNames:
    - ci
metrics:
  enabled: true
securityContext:
  runAsUser: 100
  fsGroup: 65533
resources:
  limits:
    memory: 256Mi
    cpu: 200m
  requests:
    memory: 128Mi
    cpu: 100m
nodeSelector:
  node-role.kubernetes.io/worker_group: ci
runners:
  config: |
    [[runners]]
      name = "ci"
      url = "https://gitlab.com/"
      token = "__CI_TOKEN_1__"
      executor = "docker+machine"
      [runners.docker]
        tls_verify = false
        image = "docker"
        privileged = false
        disable_entrypoint_overwrite = false
        oom_kill_disable = false
        disable_cache = true
        shm_size = 0
        pull_policy = "if-not-present"
      [runners.cache]
        Type = "s3"
        Path = "default"
        Shared = true
        [runners.cache.s3]
          ServerAddress = "s3.amazonaws.com"
          AccessKey = "__CI_ACCESS_KEY__"
          SecretKey = "__CI_SECRET_KEY__"
          BucketName = "autoscaling-ci-cache"
          BucketLocation = "us-east-1"
  executor: kubernetes
  locked: true
  tags: "ci"
  runUntagged: true
  protected: false
