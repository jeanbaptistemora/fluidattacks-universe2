imagePullPolicy: IfNotPresent
replicas: 1
gitlabUrl: https://gitlab.com/
unregisterRunners: true
terminationGracePeriodSeconds: 600
concurrent: 1000
checkInterval: 15
rbac:
  create: true
  clusterWideAccess: true
metrics:
  enabled: true
securityContext:
  runAsUser: 100
  fsGroup: 65533
resources:
  limits:
    memory: 4096Mi
    cpu: 1000m
  requests:
    memory: 3500Mi
    cpu: 800m
runners:
  config: |
    [[runners]]
      name = "ci-large"
      environment = ["FF_GITLAB_REGISTRY_HELPER_IMAGE=true"]
      [runners.docker]
        dns = ["1.1.1.1", "8.8.4.4", "8.8.8.8"]
        tls_verify = false
        image = "docker"
        privileged = false
        disable_cache = true
        pull_policy = "if-not-present"
      [runners.cache]
        Type = "s3"
        Path = "default"
        Shared = true
        [runners.cache.s3]
          ServerAddress = "s3.amazonaws.com"
          BucketName = "ci-cache.fluidattacks.com"
          BucketLocation = "us-east-1"
          Insecure = false
      [runners.kubernetes]
        cpu_request = "1200m"
        memory_request = "6500Mi"
        helper_cpu_request = "1m"
        helper_memory_request = "1Mi"
        namespace = "ci"
        poll_timeout = 300
        privileged = false
        allow_privilege_escalation = false
        [runners.kubernetes.node_selector]
          worker_group = "ci-large"
        [dns_config]
          nameservers = ["1.1.1.1", "8.8.4.4", "8.8.8.8"]
  cache:
    secretName: ci-cache-creds
  executor: kubernetes
  locked: true
  tags: "ci-large"
  runUntagged: true
  protected: false
  secret: ci-registration-token
