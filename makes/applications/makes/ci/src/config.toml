concurrent = 1000
check_interval = 20

[session_server]
  session_timeout = 1800

[[runners]]
  name = "autoscaling-ci"
  limit = 1000
  url = "https://gitlab.com/"
  token = "__autoscaling_token_1__"
  executor = "docker+machine"
  [runners.custom_build_dir]
  [runners.docker]
    tls_verify = false
    image = "docker"
    privileged = false
    volumes = [
      "/builds:/builds"
    ]
    disable_entrypoint_overwrite = false
    oom_kill_disable = false
    disable_cache = true
    shm_size = 0
  [runners.cache]
    Type = "s3"
    Path = "default"
    Shared = true
    [runners.cache.s3]
      ServerAddress = "s3.amazonaws.com"
      AccessKey = "__autoscaling_access_key__"
      SecretKey = "__autoscaling_secret_key__"
      BucketName = "autoscaling-ci-cache"
      BucketLocation = "us-east-1"
  [runners.machine]
    IdleCount = 20
    IdleTime = 1800
    MaxBuilds = 15
    MachineDriver = "amazonec2"
    MachineName = "autoscaling-ci-%s"
    MachineOptions = [
      "amazonec2-request-spot-instance=true",
      "amazonec2-spot-price=",
      "amazonec2-access-key=__autoscaling_access_key__",
      "amazonec2-secret-key=__autoscaling_secret_key__",
      "amazonec2-region=us-east-1",
      "amazonec2-tags=use,ci,management:type,production,management:product,common",
      "amazonec2-vpc-id=vpc-0ea1c7bd6be683d2d",
      "amazonec2-subnet-id=subnet-0bceb7aa2c900324a",
      "amazonec2-zone=a",
      "amazonec2-use-private-address=true",
      "amazonec2-use-ebs-optimized-instance=true",
      "amazonec2-security-group=AutoscalingCISG",
      "amazonec2-ami=ami-013da1cc4ae87618c",
      "amazonec2-instance-type=c5ad.large",
      "amazonec2-userdata=/etc/gitlab-runner/init.sh",
      "amazonec2-volume-type=gp3",
      "amazonec2-root-size=10"
    ]
    OffPeakPeriods = [
      "* * 0-6,21-23 * * mon-fri *",
      "* * * * * sat,sun *"
    ]
    OffPeakTimezone = "America/Bogota"
    OffPeakIdleCount = 0
    OffPeakIdleTime = 1800

[[runners]]
  name = "autoscaling-large-ci"
  limit = 1000
  url = "https://gitlab.com/"
  token = "__autoscaling_token_2__"
  executor = "docker+machine"
  [runners.custom_build_dir]
  [runners.docker]
    tls_verify = false
    image = "docker"
    privileged = true
    volumes = [
      "/builds:/builds",
      "/var/run/docker.sock:/var/run/docker.sock"
    ]
    disable_entrypoint_overwrite = false
    oom_kill_disable = false
    disable_cache = true
    shm_size = 0
  [runners.cache]
    Type = "s3"
    Path = "large"
    Shared = true
    [runners.cache.s3]
      ServerAddress = "s3.amazonaws.com"
      AccessKey = "__autoscaling_access_key__"
      SecretKey = "__autoscaling_secret_key__"
      BucketName = "autoscaling-ci-cache"
      BucketLocation = "us-east-1"
  [runners.machine]
    IdleCount = 5
    IdleTime = 1800
    MaxBuilds = 15
    MachineDriver = "amazonec2"
    MachineName = "autoscaling-large-ci-%s"
    MachineOptions = [
      "amazonec2-request-spot-instance=true",
      "amazonec2-spot-price=",
      "amazonec2-access-key=__autoscaling_access_key__",
      "amazonec2-secret-key=__autoscaling_secret_key__",
      "amazonec2-region=us-east-1",
      "amazonec2-tags=use,ci,management:type,production,management:product,common",
      "amazonec2-vpc-id=vpc-0ea1c7bd6be683d2d",
      "amazonec2-subnet-id=subnet-0bceb7aa2c900324a",
      "amazonec2-zone=a",
      "amazonec2-use-private-address=true",
      "amazonec2-use-ebs-optimized-instance=true",
      "amazonec2-security-group=AutoscalingCISG",
      "amazonec2-ami=ami-013da1cc4ae87618c",
      "amazonec2-instance-type=m5a.large",
      "amazonec2-volume-type=gp3",
      "amazonec2-root-size=35"
    ]
    OffPeakPeriods = [
      "* * 0-6,21-23 * * mon-fri *",
      "* * * * * sat,sun *"
    ]
    OffPeakTimezone = "America/Bogota"
    OffPeakIdleCount = 0
    OffPeakIdleTime = 1800

[[runners]]
  name = "autonomic"
  limit = 1000
  url = "https://gitlab.com/"
  token = "__autoscaling_token_3__"
  executor = "docker+machine"
  [runners.custom_build_dir]
  [runners.docker]
    tls_verify = false
    image = "docker"
    privileged = true
    volumes = [
      "/builds:/builds",
      "/var/run/docker.sock:/var/run/docker.sock"
    ]
    disable_entrypoint_overwrite = false
    oom_kill_disable = false
    disable_cache = true
    shm_size = 0
  [runners.cache]
    Type = "s3"
    Path = "default"
    Shared = true
    [runners.cache.s3]
      ServerAddress = "s3.amazonaws.com"
      AccessKey = "__autoscaling_access_key__"
      SecretKey = "__autoscaling_secret_key__"
      BucketName = "autonomicmind-ci-cache"
      BucketLocation = "us-east-1"
  [runners.machine]
    IdleCount = 5
    IdleTime = 1800
    MaxBuilds = 15
    MachineDriver = "amazonec2"
    MachineName = "autonomicmind-ci-%s"
    MachineOptions = [
      "amazonec2-request-spot-instance=true",
      "amazonec2-spot-price=",
      "amazonec2-access-key=__autoscaling_access_key__",
      "amazonec2-secret-key=__autoscaling_secret_key__",
      "amazonec2-region=us-east-1",
      "amazonec2-tags=use,ci,management:type,production,management:product,common",
      "amazonec2-vpc-id=vpc-0ea1c7bd6be683d2d",
      "amazonec2-subnet-id=subnet-0bceb7aa2c900324a",
      "amazonec2-zone=a",
      "amazonec2-use-private-address=true",
      "amazonec2-use-ebs-optimized-instance=true",
      "amazonec2-security-group=AutoscalingCISG",
      "amazonec2-ami=ami-013da1cc4ae87618c",
      "amazonec2-instance-type=c5ad.large",
      "amazonec2-userdata=/etc/gitlab-runner/init.sh",
      "amazonec2-volume-type=gp3",
      "amazonec2-root-size=10"
    ]
    OffPeakPeriods = [
      "* * 0-6,20-23 * * mon-fri *",
      "* * * * * sat,sun *"
    ]
    OffPeakTimezone = "America/Bogota"
    OffPeakIdleCount = 0
    OffPeakIdleTime = 1800

[[runners]]
  name = "autonomicjump"
  limit = 1000
  url = "https://gitlab.com/"
  token = "__autoscaling_token_4__"
  executor = "docker+machine"
  [runners.custom_build_dir]
  [runners.docker]
    tls_verify = false
    image = "docker"
    privileged = true
    volumes = [
      "/builds:/builds",
      "/var/run/docker.sock:/var/run/docker.sock"
    ]
    disable_entrypoint_overwrite = false
    oom_kill_disable = false
    disable_cache = true
    shm_size = 0
  [runners.cache]
    Type = "s3"
    Path = "default"
    Shared = true
    [runners.cache.s3]
      ServerAddress = "s3.amazonaws.com"
      AccessKey = "__autoscaling_access_key__"
      SecretKey = "__autoscaling_secret_key__"
      BucketName = "autonomicjump-ci-cache"
      BucketLocation = "us-east-1"
  [runners.machine]
    IdleCount = 5
    IdleTime = 1800
    MaxBuilds = 15
    MachineDriver = "amazonec2"
    MachineName = "autonomicjump-ci-%s"
    MachineOptions = [
      "amazonec2-request-spot-instance=true",
      "amazonec2-spot-price=",
      "amazonec2-access-key=__autoscaling_access_key__",
      "amazonec2-secret-key=__autoscaling_secret_key__",
      "amazonec2-region=us-east-1",
      "amazonec2-tags=use,ci,management:type,production,management:product,common",
      "amazonec2-vpc-id=vpc-0ea1c7bd6be683d2d",
      "amazonec2-subnet-id=subnet-0bceb7aa2c900324a",
      "amazonec2-zone=a",
      "amazonec2-use-private-address=true",
      "amazonec2-use-ebs-optimized-instance=true",
      "amazonec2-security-group=AutoscalingCISG",
      "amazonec2-ami=ami-013da1cc4ae87618c",
      "amazonec2-instance-type=c5ad.large",
      "amazonec2-userdata=/etc/gitlab-runner/init.sh",
      "amazonec2-volume-type=gp3",
      "amazonec2-root-size=10"
    ]
    OffPeakPeriods = [
      "* * 0-6,20-23 * * mon-fri *",
      "* * * * * sat,sun *"
    ]
    OffPeakTimezone = "America/Bogota"
    OffPeakIdleCount = 0
    OffPeakIdleTime = 1800
