:slug: fluidasserts/
:description: TODO
:keywords: TODO

= FLUIDAsserts

== 1. Descripción

*FLUIDAsserts* es un motor de automatización de *cierre* de hallazgos de seguridad.

.Flujo de uso
image::fluidassertses.png[FLUIDAsserts]

== 2. Requerimientos

* *CPU*: 4 cores @1.8GHz
* *RAM*: 4GiB DDR3 @1.6Ghz
* *Espacio en disco*: 10GiB
* *Red*:
** Acceso al registro de contenedores Quay.IO
** Acceso al ambiente de integración donde tengas la aplicación o plataforma
* *Sistema operativo*:
** Cualquier distribución basada en Linux que soporte DockerCE
** Windows Server con HyperV y Docker
** MacOS
* *Dependencias de software*:
** DockerCE 17 o superior
** Python 2.7, 3.5 ó 3.6

== 3. Instalación

*FLUIDAsserts* es simple de instalar:

[source, bash]
----
$ pip install -U fluidasserts
----

== 4. Ejemplos de exploits

.Exploit 1: Verificar inyección SQL
[source, python, linenum]
----
from fluidasserts.service import http

url = 'https://example.com/test.php?id=1'
http.has_sqli(url)
----

.Exploit 2: Verificar enumeración de usuarios
[source, python, linenum]
----
from fluidasserts.service import http

data = 'username=foo&password=bar'

http.has_user_enumeration('http://127.0.0.1:5000/userenum/fail', 'username', data=data)
----

.Exploit 3: Verificar seguridad de CAPTCHA
[source, python, linenum]
----
from fluidasserts.format import captcha

url = 'https://example.com/captchaimg.png'
weak_img = 'weak.jpg'

captcha.is_insecure_in_url(url, 'KCKLR')
captcha.is_insecure_in_image(weak_img, '9T795')
----

.Exploit 4: Verificar si un puerto usa protocolos de cifrado seguros
[source, python, linenum]
----
from fluidasserts.service import tcp

tcp.is_port_insecure('127.0.0.1',80)
tcp.is_port_insecure('127.0.0.1',443)
----

== 5. Ejecución

=== En un PC

==== Linux

[source, bash]
----
$ export FLUIDASSERTS_LICENSE_KEY=<ID de licencia>
$ export FLUIDASSERTS_USER_EMAIL=<Tu correo electrónico>
$ export FLUIDASSERTS_STRICT="false"

$ python exploit.py
----

==== Windows
[source, bash]
----
> set FLUIDASSERTS_LICENSE_KEY=<ID de licencia>
> set FLUIDASSERTS_USER_EMAIL=<Tu correo electrónico>
> set FLUIDASSERTS_STRICT="false"

> python exploit.py
----

=== En un pipeline de CI

* Si tienes una aplicación suscrita a nuestro servicio de Pruebas Concurrentes de Seguridad que incluya el uso de FLUIDAsserts, puedes integrarlo a tu pipeline de integración contínua. Solo debes agregar un job que ejecute dos comandos:
[source, bash]
----
$ docker login <params>
$ docker run <params>
----

.Ejemplo de job en Gitlab CI
[source, yaml]
----
fluidasserts:
  script:
    - docker login quay.io -u $QUAY_LOGIN -p $QUAY_PASSWORD
    - docker run -v "$PWD"/fusion:/code -e FLUIDASSERTS_STRICT=$STRICT quay.io/fluid/<cliente>:<app>
  artifacts:
    paths: [/tmp/fluidasserts.log]
----

*NOTA:* La variable 'STRICT' debe tener los valores 'true' o 'false'. Si es 'true' y alguna de las vulnerabilidades está abierta, ¡el pipeline se romperá!

== Licencia

Escríbenos a engineering@fluid.la para obtener información de licencias.
