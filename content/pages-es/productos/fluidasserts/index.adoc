:slug: productos/fluidasserts/
:category: productos
:description: TODO
:keywords: TODO

= FLUIDAsserts

== 1. Descripción

+FLUIDAsserts+ es un motor de automatización de *cierre* de hallazgos de seguridad sobre ambientes en ejecución +(DAST)+.

.Flujo de uso
image::fluidassertses.png[FLUIDAsserts]

== 2. Ejecución

=== En un PC

==== Linux

[source, bash]
----
$ pip install -U fluidasserts
$ export FA_LICENSE_KEY=<ID de licencia>
$ export FA_USER_EMAIL=<Tu correo electrónico>
$ export FA_STRICT="false"

$ python exploit.py
----

==== Windows
[source, bash]
----
> pip install -U fluidasserts
> set FA_LICENSE_KEY=<ID de licencia>
> set FA_USER_EMAIL=<Tu correo electrónico>
> set FA_STRICT="false"

> python exploit.py
----

=== En un pipeline de CI

Si tienes una aplicación suscrita a nuestro servicio de *Pruebas Concurrentes de Seguridad* que incluya el uso de +FLUIDAsserts+, puedes agregarlo a tu pipeline de integración contínua. Para eso, debes seguir los siguientes pasos:

. Agregar las variables +USER+, +PASS+, +ORG+ y +APP+. No te preocupes, ¡los valores serán entregados por nosotros!:
.. +USER+: Nombre de usuario para obtener la imagen de nuestro registro de contenedores
.. +PASS+: Contraseña del usuario
.. +ORG+: Nombre de la compañía
.. +APP+: Nombre de la aplicación

.Ejemplo de variables en un ambiente Gitlab CI
image::vars.png[Variables de entorno]

. Agregar un job donde se ejecute el contenedor.

.En Gitlab CI, agregar:
[source, yaml]
----
fluidasserts:
    script:
        - docker login fluid-docker.jfrog.io -u $USER -p $PASS
        - docker pull fluid-docker.jfrog.io/$ORG:$APP
        - docker run -e ORG=$ORG -e APP=$APP -e USER=$USER -e PASS=$PASS -e FA_STRICT="true" fluid-docker.jfrog.io/$ORG:$APP
----

*NOTA:* La variable +FA_STRICT+ debe tener los valores +true+ o +false+. Si es +true+ y alguna de las vulnerabilidades está abierta, ¡el pipeline se romperá!

== 3. Requerimientos

=== Para ejecutar en un PC

* *Sistema operativo*:
** Cualquier SO que soporte Python
* *Red*:
** Acceso al repositorio de artefactos https://fluid.jfrog.io
* *Dependencias de software*:
** +Python 3.6+

=== Para integrar en un pipeline de CI

* *Sistema operativo*:
** Cualquier distribución basada en Linux que soporte +DockerCE+
** Windows Server con +HyperV+ y +Docker+
** MacOS
* *Red*:
** Acceso al registro de contenedores https://fluid-docker.jfrog.io
** Acceso al ambiente de integración donde tengas la aplicación o plataforma
* *Dependencias de software*:
** +DockerCE 17+ ó superior

=== Comunes

* *CPU*: 4 cores @1.8GHz
* *RAM*: 4GiB DDR3 @1.6Ghz
* *Espacio en disco*: 10GiB

== 4. Ejemplos de exploits

.Exploit 1: Verificar inyección SQL
[source, python, linenum]
----
from fluidasserts.service import http

url = 'https://example.com/test.php?id=1'
http.has_sqli(url)
----

.Exploit 2: Verificar enumeración de usuarios
[source, python, linenum]
----
from fluidasserts.service import http

data = 'username=foo&password=bar'

http.has_user_enumeration('http://127.0.0.1:5000/userenum/fail', 'username', data=data)
----

.Exploit 3: Verificar seguridad de CAPTCHA
[source, python, linenum]
----
from fluidasserts.format import captcha

url = 'https://example.com/captchaimg.png'
weak_img = 'weak.jpg'

captcha.is_insecure_in_url(url, 'KCKLR')
captcha.is_insecure_in_image(weak_img, '9T795')
----

.Exploit 4: Verificar si un puerto usa protocolos de cifrado seguros
[source, python, linenum]
----
from fluidasserts.service import tcp

tcp.is_port_insecure('127.0.0.1',80)
tcp.is_port_insecure('127.0.0.1',443)
----

== Licencia

Escríbenos a relations@fluid.la para obtener información de licencias.
