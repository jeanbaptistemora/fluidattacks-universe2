:slug: desplazados-maquinas/
:date: 2018-02-13
:category: opiniones
:tags: aplicación, detectar, vulnerabilidad, escáner
:Image: humano-vs-maquina.png
:alt: Persona jugando ajedrez contra un brazo mecánico
:description: La detección de vulnerabilidades en manos de una herramienta automática no es suficiente para llegar a la conclusión de que una aplicación es segura. El conocimiento y experiencia de una persona siguen siendo necesarios para complementar el análisis y lograr una evaluación detallada y efectiva de la seguridad de dicha aplicación.
:keywords: detección de vulnerabilidades, detección manual, detección automática, seguridad, aplicación web
:author: Andres Cuberos
:writer: cuberos
:name: Andrés Cuberos Lopera
:about1: Ingeniero Electrónico
:about2: Gusto por disfrutar los momentos pequeños de la vida, como tomarse una cerveza, escuchar música o dormir

= ¿Seremos Desplazados por las Máquinas?

Una pregunta muy común
que se ve rondando por la Web cada cierto tiempo.
Suele coincidir con algún avance tecnológico
donde aparece una nueva máquina capaz de realizar
algún trabajo con una velocidad y precisión
que no podría ser igualada
ni por decenas de personas.

Esta pregunta cubre preocupaciones
desde trabajadores que temen perder sus empleos,
hasta preocupaciones incentivadas por +Hollywood+,
donde seremos conquistados y oprimidos por ellas.

Dejando a un lado la ciencia ficción,
el primero ha estado ocurriendo por un buen tiempo.
Con máquina no nos referimos a un robot
con la apariencia de un joven Arnold Schwarzenegger con gafas oscuras.
Puede ser cualquier equipo programado
para hacer una tarea específica.
Carros que se manejan solos,
brazos mecánicos que superan la producción
de un equipo de trabajadores,
y en el ambiente de la Seguridad de la Información,
herramientas que pueden encontrar vulnerabilidades y
fallas en una aplicación Web.
¿Qué nos espera a los que nos dedicamos a esto último?
¿Nos estamos volviendo cada vez más prescindibles?

.El inevitable desenlace que nos muestra +Hollywood+ del avance tecnológico
image::terminator.png[Robot sosteniendo un arma de fuego, con una explosión detrás]

Afortunadamente, nuestro futuro no es tan oscuro.
Aunque existen herramientas automatizadas muy poderosas
para la detección de vulnerabilidades en aplicaciones Web,
todavía el rol del ser humano es de vital importancia
si se desea un análisis de seguridad detallado.
Todavía existen situaciones donde tenemos la ventaja:

* Las herramientas pueden tener conocimiento de muchas vulnerabilidades,
saber cómo encontrarlas y qué nivel de riesgo pueden suponer.
Sin embargo, no poseen esa malicia humana que viene con la experiencia,
ese instinto que le permite a un analista de seguridad
identificar qué fallas se pueden combinar
para crear un vector de ataque que cause un mayor impacto.
Además de que esta malicia le puede permitir a una persona
encontrar vulnerabilidades que una máquina pase por alto.

* Sí, los analizadores generan un reporte con todos sus hallazgos
y criticidad pero, ¿qué tan completo es dicho reporte?
¿Te dice a través de qué campos puede un atacante obtener credenciales?
¿Te dice cómo aprovechar algún formulario para modificar la base de datos?
Lastimosamente, no, las herramientas solamente
determinan la existencia de una falla.
El "cómo"  puede ser esa falla explotada y aprovechada
por un atacante para afectar tu situación particular de negocio
es una habilidad humana, adquirida gracias a la misma malicia y experiencia
mencionada anteriormente.

* Los falsos positivos, tal vez la mayor debilidad de los analizadores,
reportar el hallazgo de una vulnerabilidad que,
en realidad, no está presente <<r1,^[1]^>>.
Un problema muy común en la mayoría de estas herramientas,
que resulta de lo mencionado en el punto anterior,
la incapacidad de explotar una falla.
Una herramienta que no filtre bien los falsos positivos
puede traer más daño que beneficio.
Si se utilizó para evitar incurrir en gastos
contratando un analista de seguridad,
ahora se tienen X vulnerabilidades encontradas.
De estas, no se sabe cuántas son falsos positivos.
Recaerá en el desarrollador,
alguien que no necesariamente domina el tema de seguridad,
revisar cuáles efectivamente son fallos y cuáles no.
¿El remedio fue peor que la enfermedad?
+
La característica de los falsos positivos
también es una de las razones por las que estas herramientas
no son muy utilizadas en ambientes de Integración Continua.
Si programamos un Integrador a que revise
cada cambio que se haga en un código,
y evite el despliegue de la aplicación en caso de encontrar algún fallo,
los falsos positivos podrían hacer que desplegar la aplicación
se convierta en toda una odisea.

* +Netsparker+ (un desarrollador de una de estas herramientas),
está de acuerdo con esta posición <<r2,^[2]^>>,
no existe un analizador capaz de detectar
todas las vulnerabilidades que están clasificadas dentro del
link:https://www.owasp.org/index.php/Top_10-2017_Top_10[Top 10]
más críticas.
Llegan a la conclusión de que un analizador
no puede saber si la aplicación está funcionando como debe,
si está alineada con los objetivos de la empresa,
si la información sensible (que puede variar dependiendo del negocio)
está siendo correctamente protegida,
si los privilegios de los usuarios están siendo asignados correctamente,
y otros casos más donde el criterio humano debe tomar la decisión.

Nuestro objetivo no es quitarle el mérito a estas herramientas,
pues utilizamos muchas de ellas en nuestra vida profesional
y son aliados muy poderosos.
Lo que queremos es purgar la idea
de que son suficientes para llegar a la conclusión
de que una aplicación Web es segura.

Para eso, desarrollamos nuestro propio experimento.
Utilizamos la aplicación Web insegura +bWAPP+
y los analizadores +W3af+, +Wapiti+ y +OWASP ZAP+.
Estos últimos comparten las características de ser
+Open Source+ y poderse ejecutar por la línea de comandos.
Gracias a esto, es posible utilizarlos en un 
ambiente de Integración Continua.
+bWAPP+ tiene más de 150 vulnerabilidades,
en el experimento se asumió un total de 170,
basado en el resultado del análisis de la empresa que la desarrolló
<<r3,^[3]^>>.
Veamos cómo les fue a nuestros concursantes:

[role="tb-row"]
.Análisis de Vulnerabilidades de +bWAPP+
[cols="^,^,^,^"]
|====
s| Herramienta s| Detectadas s| % de Fuga (No Detectadas) s| Tiempo

a|+W3af+ | 28 | 83.5% | 00:02:30

a|+Wapiti+ | 26 | 84.7% | 00:02:00

a|+ZAP-Short+ | 42 | 75.3% | 00:19:00

a|+ZAP-Full+ | 59 | 65.3% | 01:30:00
|====

En la información anterior,
+ZAP-Short+ se refiere a la herramienta +ZAP+
únicamente con los +plugins+ de +XSS+ y +SQLi+ habilitados.
+ZAP-Full+ se refiere a la misma herramienta
con todos sus +plugins+ activados.
Cabe resaltar, también, que fue necesario
desactivar la autenticación en la aplicación.
Esto se hizo para obtener un correcto funcionamiento
de las herramientas desde la línea de comandos.
Este hecho no solo aleja el experimento
de una situación real, sino que también
deja una capa de la aplicación sin analizar.

Para facilitar el análisis de resultados,
tomemos el mejor resultado (+ZAP-Full+) y
el más bajo (+Wapiti+),
y comparémoslos con la totalidad de la aplicación,
veamos qué tanta cobertura se alcanzó.

.Representación visual del mejor y peor resultado de la Tabla 1- +ZAP-Full+ y +Wapiti+
image::fuga.png[Comparación de la cobertura de dos analizadores con el alcance de una aplicación]

Como podemos ver, incluso la mejor de las herramientas utilizadas
dejó por fuera más de la mitad de las vulnerabilidades y,
entre las encontradas, pueden existir falsos positivos.
Además, se demoró una hora y media
en terminar el análisis,
tiempo que no es adecuado en un ambiente de Integración Continua.

Un desarrollador que quisiera ahorrar costos,
evitando la contratación de analistas de seguridad
y dependiera únicamente de las herramientas,
remediaría las vulnerabilidades y adquiriría
una falsa sensación de seguridad.
Ignoraría que más de la mitad de errores
siguen ahí, esperando ser encontrados y explotados
por un usuario malicioso.
Así, los recursos que se ahorraron durante el desarrollo
se verán gastados, con intereses, en la etapa de producción.

== Conclusiones

Sí, la rivalidad humano-máquina ha estado presente
desde hace mucho, y seguirá estando presente por mucho tiempo.
Sin embargo, no es necesario verlo
como una rivalidad en todos los ámbitos.
En la seguridad de la información,
más que una rivalidad, puede existir
una relación complementaria, donde la herramienta
ayuda al analista en las tareas repetitivas
y éste añade su instinto y experiencia
para detectar de manera efectiva el mayor número de vulnerabilidades.
Logrando así, ofrecer un mayor nivel de seguridad
y satisfacción a los desarrolladores de aplicaciones Web.

.Desenlace alternativo a la relación humanos-máquina
image::coexistencia.png[Apretón de manos entre persona y robot]

== Referencias

. [[r1]] link:http://resources.infosecinstitute.com/automated-tools-vs-a-manual-approach/#gref[Automated Tools vs a Manual Approach]
. [[r2]] link:https://www.netsparker.com/blog/web-security/owasp-top-10-web-security-scanner/[An Automated Scanner That Finds All OWASP Top 10 Security Flaws, Really?]
. [[r3]] link:http://www.mmebvba.com/sites/default/files/downloads/bWAPP_sample_report.pdf[BWAPP OWASP TOP TEN 2013 SCAN REPORT SUMMARY]
