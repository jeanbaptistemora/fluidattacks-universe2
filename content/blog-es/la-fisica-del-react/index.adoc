:slug: la-fisica-del-react/
:date: 2018-08-14
:category: programación
:subtitle: Introducción a React funcional
:tags: aplicación, funcional, javascript, react
:image: cover.png
:alt: Newton sentado debajo de un arbol de manzanas
:description: Características de una interfaz de usuario exitosa. Que es React y como integrarlo con JavaScript. Principales bondades de React. Cosas no tan buenas al usar esta librería. Aproximación a los componentes sin estado en React. Cómo implementar un enfoque funcional a las interfaces de usuario con React.
:keywords: React, JavaScript, Componentes, Frontend, Sin estado, Funcional.
:author: Oswaldo Parada
:writer: oparada
:name: Oswaldo José Parada Cuadros
:about1: Ingeniero Mecánico
:about2: Familia, amigos y pequeños detalles. Ahí está la respuesta.
:figure-caption: Imagen

= La física del React

Oh Newton, ¡pobre genio en pena!
¿Cuántos insultos han llegado a tu tumba
desde la boca de mil generaciones de colegiales
e ingenieros que han sufrido por culpa de tus caprichosas leyes?
Y pensar que tu ola de maldad también inició con una manzana.
Pero respetamos la simpleza
con que resolviste los enigmas del mundo.
Con solo 3 leyes lograste describir
el movimiento de todo en el universo.

Algunos aprendieron de tu sabiduría
y quisieron crear cosas simples capaces de hacer muchas cosas.
El mundo del software no fue apático a esto,
de hecho se lo tomaron muy en serio
y empezaron a crear librerías
y frameworks supuestamente milagrosos.

+JavaScript+ ha sido el más afectado con este fenómeno,
todos querían hacer un framework definitivo
y terminaron siendo un fracaso,
sin embargo, de vez en cuando nace un Newton
entre tanta librería que busca establecer
las reglas de universo de la programación,
esta vez le atribuimos esa responsabilidad a
link:https://reactjs.org/[+React+].

== Creando una hipótesis

link:https://reactjs.org/[+React+]
es una librería de +JavaScript+
que se especializa en la creación de Interfaces de Usuarios o _UI_
(por _User Interfaces_), es decir, solo se usa en +frontend+.
link:https://reactjs.org/[+React+]
fue creado por uno de los ingenieros de Facebook
y nació de la necesidad de crear páginas con contenido dinámico
que se estuvieran actualizando constantemente.

Lo que busca link:https://reactjs.org/[+React+]
es romper los límites que tiene +JavaScript+
en cuanto a la experiencia de usuario
y al rendimiento en la renderización de la información.
Eso sí, debemos añadir que esta librería
está planeada para ser usada en aplicaciones que manejen el patrón
de arquitectura +Modelo-Vista-Controlador+ (MVC),
obviamente centrándose en la vista.

== Preparando el experimento

Lo primero que necesitamos saber
es como instalar link:https://reactjs.org/[+React+]
y como agregarlo a nuestros proyectos.
Una primera forma es instalarlo con link:https://www.npmjs.com/[+npm+]
de tal manera que quede alojado en el ambiente local de desarrollo:

.Instalación de React con npm.
[source, bash]
----
npm install react --save
----

Agregamos el comando +--save+ al final
para que link:https://reactjs.org/[+React+]
quede en la lista de dependencias
del +package.json+ de nuestra aplicación.

La otra manera de instalarlo es a través
de tags +HTML+ como se muestra a continuación:

.Adición de React a la lista de dependencias por medio de tags HTML.
[source, html]
----
<script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
----

Ambas instalaciones pueden llegar a ser necesarias
para un correcto funcionamiento
pero esto depende únicamente de los otros lenguajes
y componentes que esté utilizando tu aplicación.

=== Experimentación

Empecemos con el clásico Hello, World!:

.Ejemplo de Hello, World! en React.
[source, javascript]
----
ReactDOM.render(
  <h1>Hello, world!</h1>,
  document.getElementById('root')
);
----

Este código es almacenado en un archivo tipo +js+
pero es posible que hayas notado que hay código +HTML+,
¿Qué pasa aquí?
link:https://reactjs.org/[+React+] incorpora un función para renderizar,
como ya te habíamos dicho,
esta librería se centra en el +frontend+,
por lo tanto permite que todos los elementos de diseño estén en un archivo +js+.

Sin embargo link:https://reactjs.org/[+React+]
no cuenta con la sintaxis apropiada,
por ello, incorpora una extensión conocida como
link:https://reactjs.org/docs/introducing-jsx.html[+JSX+],
muy parecido a un lenguaje de plantillas
pero con todo el poder de +JavaScript+.

+Componentes+ y +Props+ son dos conceptos importantes que debes entender
si la física del link:https://reactjs.org/[+React+] quieres aprender.
Los componentes son como las funciones en +JavaScript+
con la diferencia que retornan elementos de link:https://reactjs.org/[+React+]
que indican que es lo que debe aparecer en pantalla.
Los props (que viene del término +properties+)
son los argumentos de entrada de los componentes,
es decir, que un componente recibe props
y retorna elementos de link:https://reactjs.org/[+React+].

== Experimento contaminado

Las cosas no tan buenas al utilizar link:https://reactjs.org/[+React+],
tienen que ver más con la adopción de la nueva sintaxis
por parte de los no iniciados, que con las funcionalidades en sí.
No nos mal entiendas, la sintaxis  de link:https://reactjs.org/[+React+]
funciona y funciona muy bien!
No obstante, algunos desarrolladores no se sienten cómodos
con la forma en que tiene que incluir el +HTML+
y lo lógica de +JavaScript+ en un mismo archivo.
Este problema es realmente subjetivo.

Otra razón posiblemente problemática es el hecho
de que ahora existen clases pero esto solo afecta a aquellos
que han optado por el camino de la programación funcional.
La migración de una aplicación hacia link:https://reactjs.org/[+React+]
puede ser un poco traumática por el hecho
de que el repositorio debe ser reorganizado,
muchos archivos serán borrados y otros serán añadidos.
A veces esto es un punto débil para algunos equipos de desarrolladores.

Por último, link:https://reactjs.org/[+React+] con aproximación funcional
(hablaremos de esto en la próxima sección)
no representa (POR AHORA) una mejora significativa
en el rendimiento en comparación
con link:https://reactjs.org/[+React+] tradicional.


== Replanteamiento funcional

Hasta el momento ya tienes idea
de las leyes básicas del link:https://reactjs.org/[+React+].
Ya sabes los conceptos claves
y la manera en cómo lo puedes usar a tu favor.
A pesar de esto, nuevas teorías surgen cada día
y nos hacen preguntar si lo que sabemos
hasta ahora es la verdad absoluta.

link:https://reactjs.org/[+React+] nos ha mostrado otro camino:
+Stateless Components+ o componentes sin estado,
lo cual va muy a la par con la filosofía
que lleva +Fluid Attacks+ sobre programación funcional
(te recomendamos que leas
[button]#link:/web/es/blog/por-que-somos-funcionales[Por qué somos funcionales?]#
y [button]#link:/web/en/blog/functional-fashion-in-javascript[Functional Fashion in JavaScript]#,
para que entiendas un poco el contexto).

Modifiquemos el ejemplo de Hello, World!
para que quede como un componente tipo clase:

.Hello world en componente tipo clase.
[source, javascript]
----
class HelloWorld extends React.Component {
  render() {
    return <h1>Hello, {this.props.name}</h1>;
  }
}
const element = <HelloWorld name="World" />;
ReactDOM.render(element, document.getElementById('root')); // Hello, World
----

De hecho, ahora esta función acepta un parámetro de entrada.
Modifiquemos este componente para que sea stateless.

.Hello world en componente sin estado.
[source, javascript]
----
const HelloWorld = props => <h1>Hello, {props.name}</h1>;
const element = <HelloWorld name="World" />;
ReactDOM.render(element, document.getElementById('root')); // Hello, World
----

A simple vista se puede observar que los componentes
sin estado reducen la cantidad de líneas de código
que son necesarias para realizar un misma acción hecha con clases.

Otro beneficio muy notorio es que
no se necesita la palabra reservada
link:https://developer.mozilla.org/es/docs/Web/JavaScript/Referencia/Operadores/this[+this+],
la cual en la mayoría de los casos
vuelve al código más difícil de comprender,
desembocando en el aumento del tiempo necesario para entender
y corregir errores.

Pero quizás el mayor beneficio
viene con la ausencia del estado.
El hecho de trabajar sin estado nos hace mejorar
nuestra habilidad para desarrollar código.
Ahora tenemos que crear funciones pequeñas,
que hagan una sola cosa permitiendo entender
qué es lo que entra y qué es lo que sale.

Funciones granulares permiten una mayor reutilización
trayendo consigo reducciones de tiempo y cantidad de código.
También los tests se ven beneficiados,
si las funciones hacen una tarea
y para un mismo valor de entrada siempre se obtendrá la misma salida,
pues entonces crear los conjuntos de test es una labor fácil ejecutar.

== Conclusiones

Aparte de descubrir que las manzanas son la raíz de todo mal,
podemos afirmar que link:https://reactjs.org/[+React+]
es sin duda una librería que ofrece grandes beneficios
para cualquier aplicación sea grande o pequeña.
link:https://reactjs.org/[+React+]
es una de las pocas librerías que ofrece mejoras visuales,
funcionales y sintácticas al mismo tiempo.

El poder de link:https://reactjs.org/[+React+]
yace en la renderización de datos
que constantemente están cambiando, es decir,
es ideal para aplicaciones con contenido dinámico
que proponen mostrar los cambios visuales inmediatamente ocurren
sin necesidad de refrescar la página.

.Primera conclusión: Las manzanas son el origen del mal.
image::snow-white.png[Escena clásica de Blancanieves y la bruja malvada]

link:https://reactjs.org/[+React+] al igual que otras librerías
y extensiones permite la implementación parcial del código,
permitiendo que cualquier equipo de desarrollo
sin importar si el proyecto esté muy avanzado,
pueda migrar hacia link:https://reactjs.org/[+React+]
de manera fácil y controlada.

La legibilidad del código aumenta gracias
a los beneficios sintácticos de link:https://reactjs.org/[+React+],
más aún, si se utilizan los +stateless components+.
La legibilidad por su parte trae beneficios a futuro
como la reducción de tiempos en la solución de bugs,
aumento de la mantenibilidad y en la escalabilidad de la aplicación.
Las leyes físicas no mienten, son leyes porque siempre se cumplen si
se dan las condiciones planteadas.

Las leyes del link:https://reactjs.org/[+React+] son iguales,
si implementamos soluciones de cierta manera
es seguro que todos los beneficios
que mencionamos en este artículo se cumplirán.
Nosotros podemos ser testigos reales de las maravillas
del link:https://reactjs.org/[+React+] porque lo usamos en
[button]#link:https://fluidattacks.com/integrates[Integrates]#.
Este puede que sea el momento de utilizar la física en tus proyectos.
