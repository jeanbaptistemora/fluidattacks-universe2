[importlinter]
  root_package = tap_announcekit
  include_external_packages = True

[importlinter:contract:dag]
  name = root_dag
  type = layers
  layers =
    cli
    streamer
    streams
    objs
    stream
    api
    utils
  containers =
    tap_announcekit

[importlinter:contract:forbidden_sgqlc]
  name = forbidden_sgqlc
  type = forbidden
  source_modules =
    tap_announcekit
  forbidden_modules =
    sgqlc
  ignore_imports =
    tap_announcekit.api.cli -> sgqlc
    tap_announcekit.api.client -> sgqlc
    tap_announcekit.api.gql_schema -> sgqlc

[importlinter:contract:api:dag]
  name = api_dag
  type = layers
  layers =
    cli
    client
    auth
    gql_schema
  containers =
    tap_announcekit.api

[importlinter:contract:objs:dag]
  name = objs_dag
  type = layers
  layers =
    post
    project
    id_objs
  containers =
    tap_announcekit.objs

[importlinter:contract:objs:iso]
  name = objs_iso
  type = independence
  modules =
    tap_announcekit.objs.post
    tap_announcekit.objs.project

[importlinter:contract:streams:dag]
  name = streams_dag
  type = layers
  layers =
    posts
    project
  containers =
    tap_announcekit.streams

[importlinter:contract:streams:iso]
  name = streams_iso
  type = independence
  modules =
    tap_announcekit.streams.posts
    tap_announcekit.streams.project

[importlinter:contract:streams:project:dag]
  name = streams_project_dag
  type = layers
  layers =
    _encode
    _getters
  containers =
    tap_announcekit.streams.project

[importlinter:contract:streams:project:iso]
  name = streams_project_iso
  type = independence
  modules =
    tap_announcekit.streams.project._encode
    tap_announcekit.streams.project._getters
