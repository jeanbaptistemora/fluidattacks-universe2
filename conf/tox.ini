[tox]
minversion=3.14.0
# directorio donde esta el setup.py que empaqueta
setupdir={toxinidir}/../
# directorio donde se instalaran los ambientes virtuales
toxworkdir={toxinidir}/../build/virtual
# directorio donde se crean los instaladores
distdir={toxinidir}/../build/dist
# entornos soportados en ubuntu14
#envlist=py34
# entornos soportados en ubuntu16
envlist=py37,py38

[testenv:lint]
basepython = python3
passenv=*
changedir={toxinidir}/..
commands=
    prospector -F -W pep257 -w pyroma -s veryhigh -o text --pylint-config-file={toxinidir}/pylintrc fluidasserts
    prospector -F -W pep257 -w pyroma -s veryhigh -o text --pylint-config-file={toxinidir}/pylintrc test
deps=
    pylint==2.4.4
    prospector[with_everything]==1.2.0
    pdoc==0.3.2
    pre-commit==1.20.0
    hacking==1.1.0
    autopep8==1.4.4
    pydocstyle==4.0.1
    pep8==1.7.1
    pyflakes==2.1.1
    mccabe==0.6.1
    pyroma==2.6


[testenv:codecov]
basepython = python3
passenv=*
changedir={toxinidir}/..
commands = codecov --token={env:CODECOV_TOKEN}
deps = codecov


[testenv:test]
# propagar todas las variables de entorno definidas en #sconstruct
passenv=*
# directorio al que se ingresa antes de ejecutar los siguientes comandos
changedir={toxinidir}/..
# comandos a ejecutar con las variables y en el directorio
# si se quiere ignorar la salida invocar desde afuera -- -{posargs}
commands_pre=
    sh -c '. ./test/test.sh && commands_pre'
commands=
    sh -c '. ./test/test.sh && commands'
commands_post=
    sh -c '. ./test/test.sh && commands_post'
whitelist_externals=
    sh
# definicion de las depenencias para ambientes de desarrollo (dev)
# dependencias de ejecucion (run) estan setup.py
deps=
    wait==0.0.3
    flask==1.1.1
    Flask-HTTPAuth==3.3.0
    docker==4.1.0
    graphene==2.1.8
    gitpython==3.0.5
    flask-graphql==2.0.0
    pytest==5.2.2
    pytest-cov==2.8.1
    pytest-xdist==1.29.0
    pytest-random-order==1.0.4
    # You may need to install tesseract-ocr in your system
