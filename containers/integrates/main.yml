---
- hosts: localhost

  become: "yes"

  tasks:
   - name: Instalar paquetes
     apt:
      pkg: "{{ item }}"
      state: installed
     register: dependencias
     with_items:
      - git
      - python-dev
      - python-pip
      - apache2
      - python-setuptools
      - python-tk

   - name: Instalar librerias
     apt:
      pkg: "{{ item }}"
      state: installed
     register: dependencias2
     with_items:
      - liblcms2-dev
      - libwebp-dev
      - tcl8.6-dev
      - tk8.6-dev
      - libxml2
      - libxml2-dev
      - libxslt1-dev
      - libapache2-mod-wsgi
      - libtiff5-dev
      - zlib1g-dev
      - libfreetype6-dev
      - libapache2-mod-python
      - libmysqlclient-dev
      - cron

   - name: Upgrade pip
     pip:
      name: "{{ item }}"
      extra_args: -U --force
     with_items:
      - pip

   - name: Instalar dependencias pip
     pip:
      name: "{{ item }}"
     with_items:
      - django==1.11
      - requests==2.13.0
      - openpyxl==2.4.7
      - lxml==3.7.3
      - python-pptx==0.6.5
      - pyyaml==3.12
      - decorators==0.1.1
      - retrying==1.3.3
      - urllib3==1.19.1
      - fluidasserts==0.20170719.1624
      - social-auth-app-django==1.1.0
      - pylint==1.7.1
      - pylint-django==0.7.2
      - prospector==0.12.5
      - mysqlclient==1.3.10
      - django-sslserver==0.19
      - ansible==2.4.2.0
      - ansible-lint==3.4.20
      - django-crontab==0.7.1
      - django-analytical==2.2.2
      - mandrill==1.0.57
      - apiclient==1.0.2
      - python-magic==0.4.13
      - httplib2==0.10.3
      - google-api-python-client==1.6.2
      - oauth2client==4.0.0
      - django-intercom==0.0.13
      - pytz==2017.2
      - slackclient==1.0.9
      - boto3==1.4.7
      - watchtower==0.4.1


   - name: Remover archivo index
     file:
      path: "/var/www/html"
      state: absent
