---
- hosts: localhost

  become: "yes"

  tasks:
   - name: Instalar paquetes
     apt:
      pkg: "{{ item }}"
      state: installed
     register: dependencias
     with_items:
      - git
      - python-dev
      - python-pip
      - apache2
      - python-setuptools
      - python-tk

   - name: Instalar librerias
     apt:
      pkg: "{{ item }}"
      state: installed
     register: dependencias2
     with_items:
      - liblcms2-dev
      - libwebp-dev
      - tcl8.6-dev
      - tk8.6-dev
      - libxml2
      - libxml2-dev
      - libxslt1-dev
      - libapache2-mod-wsgi
      - libtiff5-dev
      - zlib1g-dev
      - libfreetype6-dev
      - libapache2-mod-python
      - libmysqlclient-dev

   - name: Upgrade pip
     pip:
      name: "{{ item }}"
      extra_args: -U --force
     with_items:
      - pip

   - name: Instalar dependencias pip
     pip:
      name: "{{ item }}"
     with_items:
      - django
      - python-pptx
      - pyyaml
      - openpyxl
      - requests
      - lxml
      - decorators
      - retrying
      - social-auth-app-django
      - prospector
      - mysqlclient

   - name: Remover archivo index
     file:
      path: "/var/www/html"
      state: absent
